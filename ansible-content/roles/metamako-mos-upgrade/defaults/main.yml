---
# Metamako MOS (MetaOS) Upgrade Role - Default Variables

# Connection settings
metamako_connection_timeout: 300
metamako_command_timeout: 60
metamako_ssh_retries: 3

# Ultra-low latency requirements
metamako_maintain_latency: true
metamako_max_latency_deviation_ns: 100
metamako_latency_baseline_required: true

# Image management
metamako_image_directory: "/tmp"
metamako_backup_image_directory: "/var/backup"
metamako_image_extension: "tar.gz"
metamako_verify_image_signature: true

# Storage management
metamako_minimum_free_space_mb: 1024
metamako_cleanup_old_images: true
metamako_preserve_current_image: true

# Timing and synchronization
metamako_time_sync_required: true
metamako_ptp_validation: true
metamako_clock_tolerance_us: 1

# Upgrade behavior
metamako_reboot_required: true
metamako_reboot_timeout: 600
metamako_post_reboot_delay: 120

# Validation settings
metamako_validation_timeout: 300
metamako_validate_version_after_upgrade: true
metamako_validate_latency_after_upgrade: true
metamako_validate_timing_after_upgrade: true
metamako_validate_throughput_after_upgrade: true

# Performance validation thresholds
max_acceptable_latency_ns: 1000
min_throughput_gbps: 1.0
max_jitter_ns: 50
max_packet_loss_ppm: 1

# Hardware validation
validate_optical_interfaces: true
validate_timing_references: true
validate_temperature_sensors: true

# Temperature thresholds
max_device_temperature: 70.0
max_optics_temperature: 75.0

# Rollback settings
metamako_enable_rollback: true
metamako_rollback_timeout: 600

# Timing controls
timing_stabilization_delay: 60
performance_measurement_duration: 30
baseline_capture_timeout: 120

# Application management
manage_applications: false
applications_to_enable: []
applications_to_disable: []
applications_to_force_shutdown: []
application_filename: ""
application_source: ""
eos_extension_filename: ""
eos_extension_source: ""

# Metawatch/Metamux settings (extends common_upgrade_state from group_vars)
metamako_upgrade_state: "{{
  common_upgrade_state | combine({'metawatch_installed': false,
    'metawatch_running': false,
    'metawatch_sync_status': 'N/A',
    'metawatch_telemetry_status': 'N/A',
    'metamux_installed': false,
    'metamux_running': false,
    'device_type': '',
    'latency_mode': 'normal',
    'metawatch_enabled': false,
    'metamux_enabled': false})
}}"
