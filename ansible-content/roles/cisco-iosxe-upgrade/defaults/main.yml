---
# Default variables for Cisco IOS-XE upgrade role
# These can be overridden in playbooks, inventory, or host_vars

# Validation control flags
# Enable/disable specific validation modules
validate_ipsec: true   # Enable IPSec tunnel validation
validate_bfd: true   # Enable BFD session validation
validate_optics: true   # Enable interface optics validation

# Upgrade behavior settings
check_install_mode: true   # Verify install vs bundle mode before upgrade
verify_space: true   # Check available storage space
backup_config: true   # Create configuration backup before upgrade
rollback_on_failure: true  # Automatically rollback on upgrade failure

# Validation thresholds
max_acceptable_errors: 10  # Maximum interface errors before flagging
min_optical_power: -15.0  # Minimum acceptable optical power (dBm)
max_optical_power: 5.0  # Maximum acceptable optical power (dBm)
max_temperature: 75.0  # Maximum acceptable transceiver temperature (Â°C)
bfd_success_threshold: 0.8  # Minimum percentage of BFD sessions that must be UP

# Timing controls
validation_timeout: 300  # Timeout for validation tasks (seconds)
reboot_timeout: 900  # Timeout for device reboot (seconds)
convergence_wait: 120  # Wait time for protocol convergence (seconds)

# File paths (use centralized variables from group_vars/all.yml)
validation_output_dir: "{{ validation_results_path }}"
baseline_storage_dir: "{{ baseline_base_path }}"

# Upgrade state initialization (extends common_upgrade_state from group_vars)
iosxe_upgrade_state: "{{ common_upgrade_state | combine({'install_mode': false, 'boot_mode': 'bundle', 'available_space': 0, 'required_space': 0}) }}"

# Reboot tracking
bundle_mode_reboot_required: false

# Image transfer settings
target_image_size: 1000000000  # Default expected image size (1GB) in bytes

# Platform detection
device_platform: "generic"  # Platform family (detected at runtime)
