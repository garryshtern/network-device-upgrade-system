---
# Normalize baseline data by removing time-sensitive fields at ALL nesting levels
# This task filters out fields that change between measurements (age, uptime, timestamps)
# enabling meaningful comparison of actual network structure changes
# Recursively walks nested dicts and lists to remove excluded fields
#
# Input variables:
#   - data_to_normalize: The data structure to filter (dict, list of dicts, or primitive)
#   - fields_to_exclude: List of field names to remove at ANY level
#
# Output variables:
#   - normalized_data: The filtered data structure with excluded fields removed at all levels

- name: Recursively remove excluded fields at all nesting levels
  ansible.builtin.set_fact:
    normalized_data: "{{ data_to_normalize | remove_excluded_fields_recursive(fields_to_exclude) }}"
